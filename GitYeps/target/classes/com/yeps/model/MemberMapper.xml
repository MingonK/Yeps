<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.yeps.model">

	<select id="listMember" resultType="MemberDTO">
		select * from yeps_member
	</select>
	
	<select id="findMember" parameterType="java.util.HashMap" resultType="MemberDTO">
		${sql}
	</select>

	<select id="checkJumin" parameterType="MemberDTO" resultType="int">
		select count(*) from yeps_member where ssn1 = #{ssn1} and ssn2 = #{ssn2}
	</select>
	
	<insert id="insertMember" parameterType="MemberDTO">
		insert into yeps_member values
		(yeps_member_seq.nextval,#{name},#{ssn1},#{ssn2},#{email},#{passwd},sysdate,0,0,'n','n','n','n','n','n','n',#{salt})
	</insert>
	
	<select id="confirmEmail" parameterType="java.util.HashMap" resultType="MemberDTO">
		select * from yeps_member where email=#{email}
	</select>
	
	<delete id="deleteMember" parameterType="int">
		delete from yeps_member where mnum = #{mnum}
	</delete>
	
	<select id="loginMember" parameterType="MemberDTO" resultType="MemberDTO">
        select mnum,email,name,ismaster,ismanager,imagecount,reviewcount from yeps_member where email = #{email} and passwd = #{passwd}
    </select>
    
    <select id="getSaltByEmail" parameterType="MemberDTO" resultType="String">
    	select salt from yeps_member where email=#{email}
    </select>
    
    <select id="findMemberEmail" parameterType="MemberDTO" resultType="String">
        select email from yeps_member where name = #{name} and ssn1 = #{ssn1} and ssn2 = #{ssn2}
    </select>
    
    <select id="findMemberPasswd" parameterType="MemberDTO" resultType="int">
        select count(*) from yeps_member where name = #{name} and ssn1 = #{ssn1} and ssn2 = #{ssn2} and email = #{email}
    </select>
    
    <update id="temporaryPasswd" parameterType="MemberDTO">
    	update yeps_member set passwd=#{passwd} where name = #{name} and ssn1 = #{ssn1} and ssn2 = #{ssn2} and email = #{email}
    </update>
    
    <update id="updateMemberProfile" parameterType="MemberDTO">
    	update yeps_member set name=#{name} where mnum=#{mnum}
    </update>
    
    <update id="updateMemberPasswd" parameterType="java.util.HashMap">
		update yeps_member set passwd=#{passwd1} where mnum=#{mnum} and passwd=#{passwd}
	</update>
	
	<delete id="leaveMember" parameterType="MemberDTO">
		delete from yeps_member where mnum = #{mnum} and passwd=#{passwd}
	</delete>
	<!-- 
	
	<select id="checkMember" parameterType="java.util.HashMap" resultType="MemberDTO">
		select * from jsp_member where ssn1=#{ssn1} and ssn2=#{ssn2}
	</select>
	
	<select id="getMember" parameterType="int" resultType="MemberDTO">
		select * from jsp_member where no=#{no}
	</select>
	
	<update id="updateMember" parameterType="MemberDTO">
		update jsp_member set passwd=#{passwd} , email=#{email}, hp1=#{hp1}, hp2=#{hp2}, hp3=#{hp3} where no=#{no}
	</update>
	 -->
	 
	 
	 
	 
	<!-- 상우 --> 
	<select id="mylist_info1" parameterType="int"  resultType="MemberDTO">
  		select * from yeps_member where mnum = #{NBPmnum}
  	</select>
  	
  	<select id="getSelectedRestaurant_M" parameterType="int" resultType="MemberDTO">
  		select * from yeps_member where mnum= #{mnum}
  	</select>

	<select id="memberName" parameterType="int" resultType="MemberDTO">
		select * from yeps_member where mnum= #{mnumList}
	</select>

	<select id="previous_M" parameterType="int" resultType="MemberDTO">
		select *from yeps_member where mnum= #{mnum}
	</select>
	
	<select id="SearchedDTO_M" parameterType="int" resultType="MemberDTO">
		select *from yeps_member where mnum= #{mnum}
	</select>
	
	
</mapper>